import{q as p}from"./chunk-WVLTZNIW.js";import{K as e,M as i,R as s,j as a}from"./chunk-NFEL3EDL.js";var n=class r{constructor(t){this.http=t;this.loadInitialCart()}apiUrl="http://localhost:3000/cart";cartItemsSubject=new a([]);cartItems$=this.cartItemsSubject.asObservable();loadInitialCart(){this.getCart().subscribe(t=>{this.cartItemsSubject.next(t)})}getCart(){return this.http.get(this.apiUrl)}addToCart(t){return this.http.post(this.apiUrl,t).pipe(e(()=>{this.refreshCart()}))}removeFromCart(t){return this.http.delete(`${this.apiUrl}/${t}`).pipe(e(()=>{this.refreshCart()}))}clearCart(){return this.http.delete(`${this.apiUrl}/clear`).pipe(e(()=>{this.cartItemsSubject.next([])}))}refreshCart(){this.getCart().subscribe(t=>{this.cartItemsSubject.next(t)})}static \u0275fac=function(o){return new(o||r)(s(p))};static \u0275prov=i({token:r,factory:r.\u0275fac,providedIn:"root"})};export{n as a};
